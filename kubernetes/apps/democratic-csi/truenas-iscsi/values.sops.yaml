driver:
  config:
    driver: freenas-api-iscsi
    httpConnection:
      protocol: https
      apiKey: ENC[AES256_GCM,data:QaYgxu7LucPfAY5TdiRmq+7noa54T+3JKPcA8Pmwf1vCLdCVpgtNiEs6ODhpxrHGy4cfeV4WrJLKR9cLFyo+yN3c,iv:lczZ8fdTM+4zin5+RA7PmxA+/UqX/O2vlf1tLSRzSAE=,tag:B+3ICcPAeBQKhzgDUuIJBA==,type:str]
      host: 10.0.0.9
      port: 443
      allowInsecure: true
    zfs:
      datasetParentName: nvme/talos/iscsi/volumes
      detachedSnapshotsDatasetParentName: nvme/talos/iscsi/snapshots
      zvolCompression: null
      zvolDedup: null
      zvolEnableReservation: false
      zvolBlockSize: null
    iscsi:
      targetPortal: 10.0.0.9:3260
      targetPortals: []
      interface: null
      namePrefix: csi-
      nameSuffix: -talos
      targetGroups:
        - targetGroupPortalGroup: 1
          targetGroupInitiatorGroup: 1
          targetGroupAuthType: None
          targetGroupAuthGroup: null
      extentInsecureTpc: true
      extentXenCompat: false
      extentDisablePhysicalBlocksize: true
      extentBlocksize: 512
      extentRpm: SSD
      extentAvailThreshold: 0
csiDriver:
  # should be globally unique for a given cluster
  name: org.democratic-csi.freenas-api-iscsi
storageClasses:
  - name: truenas-iscsi
    defaultClass: true
    reclaimPolicy: Delete
    volumeBindingMode: Immediate
    allowVolumeExpansion: true
    parameters:
      fsType: ext4
      detachedVolumesFromSnapshots: "false"
    mountOptions: []
    secrets:
      provisioner-secret: null
      controller-publish-secret: null
      node-stage-secret: null
      node-publish-secret: null
      controller-expand-secret: null
volumeSnapshotClasses:
  - name: truenas-iscsi
    parameters:
      detachedSnapshots: "true"
node:
  hostPID: true
  driver:
    extraEnv:
      - name: ISCSIADM_HOST_STRATEGY
        value: nsenter
      - name: ISCSIADM_HOST_PATH
        value: /usr/local/sbin/iscsiadm
    iscsiDirHostPath: /usr/local/etc/iscsi
    iscsiDirHostPathType: ""
sops:
  age:
    - recipient: age1m0lm4afkysxufghhpez3p0wjzchms5gpadc085p3ukqh75hyvanst3lrvr
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBHT1U3SEcvRnNpMExFUE9Z
        c080WktGN3c0anJlMGE4Y2RnQm1ZKzNJeEg4CmlId2daaUZUK1BwTmF3aGxrSXYr
        cld4aE8vaXFUWWFwQUM3Z20vaGw1SEEKLS0tIGdWNEpnRTBDM1JTWkhkTk9wL0Jt
        OC92blpJcDNyeWppbmhrNVdzdjlQdW8K2Vxg2F2bO9bmoD1n1H828CLyuAaau85E
        vHKo9AGxwkZ2so8OWJyZ8QXOBEr/t73tigQcwf1/9y9Tp20YWAWddA==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-05-14T13:56:40Z"
  mac: ENC[AES256_GCM,data:Q/F87O1drXTS8gtMNdxncfvI6Wvbl2HXt2IXlKrvD23J0BiNEsoHaM8MdKetHMc0PnNREkMH1eWRsN4rED0EbYAW1gaP9INsCvbhAC/HjIyjc+k+B0QZBGqwCzzMNurpIxCFEedVMdZFBR44Jew/Ell5KN4Tq+2xAUT9vwoiGYA=,iv:GerWBT6fgdDs/7h83hpNOpisSsji8paklzvUoN4uw94=,tag:0wBev554PQ3np2TXWXGhCQ==,type:str]
  encrypted_regex: ^(data|stringData|apiKey|rootPassword|secretKey|adminPassword|basicAuthPassword|password|secret_key)$
  mac_only_encrypted: true
  version: 3.10.2
