replicaCount: 1
image:
  registry: harbor.mjwood.org
  repository: forgejo/forgejo/runner
  pullPolicy: Always
runner:
  config:
    # -- create a secret by run: forgejo-runner register --no-interactive --token {TOKEN} --name runner --instance https://next.forgejo.org
    create: true
    instance: https://forge.mjwood.org
    name: kube-runner
    token: ENC[AES256_GCM,data:Bew6nW55Blp5E9cvX63dJwwgelHHgEm6wwHdH7e2f73lFw1Ioxuo/g==,iv:8YSYpraX9HYoRzWZU+0f+DzoDMz7osCIkM9YW+9XJkU=,tag:khXP9AuCA9QQhaktD3cJEw==,type:str]
    # based on https://code.forgejo.org/forgejo/runner/commit/1139bb7d12ff7889694b24731707e153678ab960
    file:
      log:
        # -- The level of logging, can be trace, debug, info, warn, error, fatal
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        level: info
        # -- The level of logging for jobs, can be trace, debug, info, earn, error, fatal
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        job_level: info
      runner:
        # -- Extra environment variables to run jobs.
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        envs:
          DOCKER_HOST: tcp://localhost:2376
          DOCKER_TLS_VERIFY: "0"
        fetch_timeout: 5s
        fetch_interval: 2s
        # -- The labels of a runner are used to determine which jobs the runner can run, and how to run them.
        # Like: ["macos-arm64:host", "ubuntu-latest:docker://node:16-bullseye", "ubuntu-22.04:docker://node:16-bullseye"]
        # If it's empty when registering, it will ask for inputting labels.
        # If it's empty when execute `deamon`, will use labels in `.runner` file.
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        labels:
          - docker
          - ubuntu-latest:docker://node:16-bullseye
          - ubuntu-22.04:docker://node:16-bullseye
      cache:
        # -- Enable cache server to use actions/cache.
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        enabled: false
        # -- The directory to store the cache data.
        # If it's empty, the cache data will be stored in $HOME/.cache/actcache.
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        dir: ""
        # -- The host of the cache server.
        # It's not for the address to listen, but the address to connect from job containers.
        # So 0.0.0.0 is a bad choice, leave it empty to detect automatically.
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        host: ""
        # -- The port of the cache server.
        # 0 means to use a random available port.
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        port: 0
        # -- The external cache server URL. Valid only when enable is true.
        # If it's specified, act_runner will use this URL as the ACTIONS_CACHE_URL rather than start a server by itself.
        # The URL should generally end with "/".
        # @section -- Configuration yaml of runner (see: https://code.forgejo.org/forgejo/runner/src/branch/main/internal/pkg/config/config.example.yaml)
        external_server: ""
dind:
  image:
    registry: harbor.mjwood.org
    repository: hub/library/docker
    pullPolicy: Always
    tag: 28.3.3-dind
  # -- We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi
  # @section -- Docker in Docker
  resources: {}
kubectl:
  image:
    registry: harbor.mjwood.org
    repository: hub/bitnami/kubectl
    pullPolicy: Always
    tag: 1.33.4
sops:
  age:
    - recipient: age1m0lm4afkysxufghhpez3p0wjzchms5gpadc085p3ukqh75hyvanst3lrvr
      enc: |
        -----BEGIN AGE ENCRYPTED FILE-----
        YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBIZzEwZTVud0JEUHVzMHJX
        RGJrYklHS1dSQUpFQktuUEl4MDFyM2wwcFI4CllKVVJWeUV6NGQzeU5nTFVSZXo0
        VEhkY1diSkJNYVRiazA5UklqZkNSYncKLS0tIGN6L1YrekFVN0h6dnJSOGloRWlI
        Q2JHaTN5WWl2M2krZVoyMnJiTnBiRWcKCwtbXK7QlzFv1PaC6RXBtAJ6ULRcnVy9
        vFdhH7pFEkLQWBejIxVOIpJKY83Gw9R6ut8FDW4UcbU+GFjriJkJ4Q==
        -----END AGE ENCRYPTED FILE-----
  lastmodified: "2025-09-13T22:57:05Z"
  mac: ENC[AES256_GCM,data:g54n3f8pBLCzPIbd7aLFN4nPI1JqZnh852r99Q8qcpbcuPxsjgxjgcg5zXJZfnVTAOSex1x49s8DJfHI32NCn+OazlMvcKzARuBiekgXyde1Gr4OqHYSquko9RTk78+Txe5dWn3cfFc+yPBXscFyvOBIKvo9d490rS7IvpguePk=,iv:WJTjZSk65d7cArTmzvksbz8vdRy7pLBjojsFmSltgRA=,tag:j3LdiAN1ojGrZlfXljPmgQ==,type:str]
  encrypted_regex: ^(data|stringData|apiKey|rootPassword|secretKey|adminPassword|basicAuthPassword|password|secret_key|secret|WOODPECKER_FORGEJO_SECRET|token)$
  mac_only_encrypted: true
  version: 3.10.2
